# Magpie
Magpie is a script that fetches shiny stuff from your favourite internet services and passes them onto you via telegram channel broadcast.

## Non-Standard Dependencies
- [python-telegram-bot, `telegram`](https://github.com/python-telegram-bot/python-telegram-bot)
- [feedparser, `feedparser`](https://github.com/kurtmckee/feedparser)
- [Requests, `requests`](https://github.com/kennethreitz/requests)
- [Beautiful Soup, `bs4`](https://www.crummy.com/software/BeautifulSoup/)

## Supported Sources
- RSS Feeds
- Twitch Streams (online/offline)
- Facebook Pages

## Inputs
Inputs are read by Magpie from the file `config.json`, which is auto generated from first-time execution of `main.py`.

### Accounts
Required information under accounts are the `telegram_bot_token` as well as the `telegram_channel_public_link`.
- `telegram_bot_token`: Token for your telegram bot as generated by @BotFather(telegram).
- `telegram_channel_public_link`: Public link for the channel in which your telegram bot will post (the bot account must have broadcast permissions).
- `telegram_channel_id`: The channel_id for the above channel. Given the above two values, `main.py` will automatically generate this by sending a json-formatted string to the channel. From then on, Magpie will be able to post on the channel even if it is private.
- `twitch_client_api`: API for https://api.twitch.com/kraken. This is requred only if twitch streams are included as part of `config.json`.

### Services
All services have,
- `service`: An identifier for type of service
- `service-name`: A string for Magpie to generate part of the broadcasted message
- `history`: A holder for the last update Magpie posted for the service

Additionally, each service has some special key-value pairs.

Under `twitch`,
- `channel`: Name of channel to track

Under `html`,
- `url`: URL of html to track
- `selector`: bs4 selector of content to track
- `filter`: Magpie will only update with content that includes this string

Under `rss`,
- `url`: URL of rss feed
